{# templates/read/view.html.twig #}
{% extends 'base.html.twig' %}

{% block body %}
    <div class="container my-5">
        <h2>{{ document.title }}</h2>

        <p class="lead">Veuillez lire ce document pour valider votre lecture.</p>

        {# ZONE D'AFFICHAGE DU PDF (IFRAME) #}
        <div class="d-flex justify-content-center border border-dark mb-4">
            <iframe 
                src="{{ path('read_document_file', { token: token }) }}" 
                style="width: 100%; height: 80vh; border: none;"
                title="Document PDF">
            </iframe>
        </div>

        {# BOUTON J'AI LU #}
        {% if not delivery.readAt %}
            <form action="{{ path('confirm_read', { token: token }) }}" method="post">
                <button type="submit" class="btn btn-lg btn-success w-100">
                    J’ai lu ce document et je confirme
                </button>
            </form>
        {% else %}
            <div class="alert alert-success text-center">
                Ce document est déjà marqué comme lu.
            </div>
        {% endif %}
    </div>
{% endblock %}

{% block javascripts %}
    {# AUCUN SCRIPT ICI POUR L'IFRAME #}
{% endblock %}